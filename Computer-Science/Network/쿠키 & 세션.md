## 쿠키와 세션을 사용하는 이유
HTTP는 Stateless, Connectionless한 특성 때문에 클라이언트의 요청에 대한 응답이 끝나면 연결을 끊고 상태 정보가 유지되지 않는다. 그래서 현재 접속한 사용자가 이전에 접속했던 사용자와 같은 사용자인지 아닌지 알 수 있는 방법이 없다. 계속해서 연결을 유지하지 않기 때문에 리소스 낭비가 줄어든다는 장점도 있지만, 통신할 때마다 새로 연결하기 때문에 클라이언트는 매 요청마다 다시 인증을 해야 한다는 단점이 있다. 이러한 단점을 해결하기 위해, 즉 클라이언트 인증을 유지하기 위해 사용한다.

## 쿠키
클라이언트가 웹 사이트를 방문할 때, 해당 사이트의 서버에서 클라이언트 측에 저장하는 기록 정보 파일을 말한다.

- 쿠키 특징
    - 클라이언트 측에 정보를 저장
    - 이름, 값, 유효시간, 도메인, 경로 정보로 구성
    - 클라이언트에 총 300개의 쿠키 저장 가능
    - 하나의 도메인 당 20개의 쿠키 생성 가능
    - 하나의 쿠키는 4KB까지 저장 가능

- 쿠키 동작 순서
    1. 클라이언트가 페이지를 요청
    2. 서버에서 쿠키를 생성
    3. HTTP 헤더에 쿠키를 포함하여 클라이언트 측에 응답
    4. 전달받은 쿠키를 클라이언트 측(브라우저)에서 보관
    5. 다음 요청 때 쿠키가 존재한다면 해당 쿠키를 HTTP 헤더에 포함하여 서버에 전송
    6. 서버에서 쿠키를 읽어 상태 정보를 변경할 필요가 있다면 쿠키를 업데이트 후, 클라이언트에 응답

- 쿠키 사용 예
    - 자동 로그인
    - 쇼핑몰 장바구니 기능
    - 팝업 표시 여부

- 쿠키 단점
    - 쿠키에 대한 정보를 매 헤더(Http Header)에 추가하여 보내면 상당한 트랙픽을 발생한다.
    - 결제 정보, 로그인 정보 등을 쿠키에 저장하였을때 쿠키가 유출되면 보안 문제가 발생한다.

## 세션
세션은 일정 시간 동안 같은 클라이언트의 요청을 하나의 상태로 보고, 그 상태를 유지해주는 기술이다. 여기서 일정 시간이란 클라이언트가 브라우저를 통해서 웹 서버에 접속한 시점부터 브라우저를 종료할 때까지를 말한다. 즉, 클라이언트가 웹 서버에 접속해 있는 상태를 세션이라고 한다.

- 세션 특징
    - 서버 측에 정보를 저장
    - 각 클라이언트에게 고유 id를 부여
    - 보안 면에서 쿠키보다 우수
        - 브라우저를 닫거나, 서버에서 세션을 삭제 시에 데이터가 삭제되기 때문
    - 저장 데이터에 제한이 없음(서버 용량이 허용하는 한 가능)
    - 사용자가 많아질수록 서버 메모리를 많이 차지하게 됨

- 세션 동작 순서
    1. 클라이언트가 서버에 처음으로 요청을 보냄 (첫 요청이기 때문에 세션 id가 존재하지 않음)
    2. 서버에서는 세션 id를 확인하고 새로 발급해서 응답
    3. 이후 클라이언트는 전달받은 세션 id 값을 브라우저에 쿠키 형태로 저장한 뒤(쿠키 이름 : JSESSIONID), 매 요청마다 헤더에 쿠키를 포함하여 요청
    4. 서버는 세션 id를 확인하여 사용자를 식별 후 응답
    5. 클라이언트(브라우저) 종료 시 세션 id 제거, 서버에서도 세션 제거

- 세션 사용 예
    - 로그인
    - 보안상 중요한 작업을 할 때


## 쿠키와 세션의 차이점
쿠키와 세션은 역할과 동작 원리가 비슷하다. 그 이유는 세션도 결국 쿠키를 사용하기 때문이다. 하지만 아래와 같은 차이점이 존재한다.

|               | 쿠키 (Cookie)                                                | 세션 (Session)                                               |
| ------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 저장 위치     | 클라이언트                                                   | 서버                                                         |
| 저장 형식     | text                                                         | Object                                                       |
| 용량 제한     | 총 300개<br />하나의 도메인 당 20개<br />하나의 쿠키 당 4KB  | 서버가 허용하는 한 제한 없음                                 |
| 보안          | 클라이언트에 저장되므로 보안에 취약                          | 서버에서 처리하므로 비교적 보안이 좋음                       |
| 속도          | 세션보다 빠름                                                | 느림. 서버의 처리가 필요하기 때문에                          |
| 라이프 사이클 | 만료시간에 따라 브라우저를 종료해도 계속해서 남아 있을 수 있다. | 브라우저 종료 시 <br />(만료시간을 정할 수 있지만, 브라우저가 종료되면 만료시간에 상관없이 삭제된다.) |


### 참고
- https://88240.tistory.com/190
- https://github.com/WeareSoft/tech-interview/blob/master/contents/network.md#%EC%BF%A0%ED%82%A4%EC%99%80-%EC%84%B8%EC%85%98
- https://hahahoho5915.tistory.com/32
- https://cjh5414.github.io/cookie-and-session/