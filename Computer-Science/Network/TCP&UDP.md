# TCP & UDP
> 인터넷은 전송 계층에 UDP, TCP 두개의 주된 프로토콜을 갖는다.

## TCP (Transmission Control Protocol)
대부분의 인터넷 응용 분야들은 `신뢰성` 과 `순차적인 전달` 을 필요로 한다. UDP 로는 이를 만족시킬 수 없으므로 다른 프로토콜이 필요하여 탄생한 것이 `TCP`이다.
일반적으로 TCP와 IP를 함께 사용하는데, IP가 `데이터의 배달`을 처리한다면 TCP는 `패킷을 추적 및 관리`하게 된다. TCP는 연결형 서비스를 지원하는 프로토콜로 인터넷 환경에서 기본으로 사용한다.

### TCP 특징  
- 연결형 서비스로 가상 회선 방식을 제공
- 3-way handshaking과정을 통해 연결을 설정, 4-way handshaking을 통해 해제
- 흐름 제어 및 혼잡 제어
- 높은 신뢰성을 보장한다
- UDP보다 속도가 느리다
- 전이중(Full-Duplex), 점대점(Point to Point) 방식
- ex) 파일 전송


TCP가 가상 회선 방식을 제공한다는 것은 발신지와 수신지를 연결하여 패킷을 전송하기 위한 논리적 경로를 배정한다는 말이다. 그리고 `3-way handshaking`과정은 목적지와 수신지를 확실히 하여 정확한 전송을 보장하기 위해서 세션을 수립하는 과정을 의미한다.

TCP는 연결형 서비스로 `신뢰성을 보장`하기 때문. 그래서 `3-way handshaking`의 과정도 사용하는 것이고, 데이터의 `흐름제어`나 `혼잡 제어`와 같은 기능도 한다. 하지만 이러한 기능때문에 UDP보다 `속도가 느리다.` (이러한 기능은 CPU를 사용하기 때문에 속도에 영향을 주는 것)

### 흐름제어(Flow Control)와 혼잡제어(Congestion Control)이란?
- 흐름제어
  - 데이터를 송신하는 곳과 수신하는 곳의 데이터 처리 속도를 조절하여 수신자의 버퍼 오버플로우를 방지하는 것이다. 예를 들어 송신하는 곳에서 감당이 안되게 데이터를 빠르게 많이 보내면 수신자에서 문제가 발생하기 때문입니다.
- 혼잡제어
  - 네트워크 내의 패킷 수가 넘치게 증가하지 않도록 방지하는 것이다. 만약 정보의 소통량이 과다하면 패킷을 조금만 전송하여 혼잡 붕괴 현상이 일어나는 것을 막는다.


## UDP(User Datagram Protocol, 사용자 데이터그램 프로토콜)
IP 데이터그램을 캡슐화하여 보내는 방법과 연결 설정을 하지 않고 보내는 방법을 제공한다. UDP는 흐름제어, 오류제어 또는 손상된 세그먼트의 수신에 대한 재전송을 하지 않는다. 이 모두가 사용자 프로세스의 몫이다. UDP가 행하는 것은 포트들을 사용하여 IP 프로토콜에 인터페이스를 제공하는 것이다.

여기서 데이터그램이란 `독립적인 관계를 지니는 패킷`이라는 뜻. TCP와 달리 UDP는 `비연결형` 프로토콜이다. 즉, 연결을 위해 할당되는 논리적인 경로가 없는데, 그렇기 때문에 각각의 패킷은 다른 경로로 전송되고, 각각의 패킷은 독립적인 관계를 지니게 된다.

UDP를 사용한 것들에는 DNS가 있다. 어떤 호스트 네임의 IP 주소를 찾을 필요가 있는 프로그램은, DNS 서버로 호스트 네임을 포함한 UDP 패킷을 보낸다. 이 서버는 호스트의 IP 주소를 포함한 UDP 패킷으로 응답한다.


### UDP 특징
- 비연결형 서비스
- 데이터그램 단위로 전송
- 정보를 주고 받을 때, 신호절차를 거치지 않는다.
- 흐름제어(flow control)가 없어서 패킷이 제대로 전송되었는지, 오류가 없는지 확인할 수 없다.
- 헤더의 CheckSum 필드를 통해 최소한의 오류만 검출한다.
- 신뢰성이 낮다.
- TCP보다 속도가 빠르다.
- ex) 실시간 서비스(streaming)



### 참고
[망나니 개발자님 블로그](https://mangkyu.tistory.com/15)
[재엽님 블로그](http://asfirstalways.tistory.com/327)