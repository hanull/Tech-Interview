# 시스템 콜(System Call)
운영체제는 크게 커널 모드, 사용자 모드로 나뉜다. 모드 비트로 나눈다.

### 왜 두 모드로 나눌까요?
- I/O 장치를 보호하기 위해
- ex) 하드 디스크 데이터를 삭제하는 프로그램 등 

- 커널 모드
    - 모드 비트 0
    - 모든 시스템 메모리에 접근 가능
    - 모든 CPU 명령 실행 가능
    - 운영체제 코드나 디바이스 드라이버 등
- 사용자 모드
    - 모드 비트 1
    - 사용자 애플리케이션 실행
    - 하드웨어 직접 접근 불가
    - 시스템 콜(System Call) 호출 시, 일시적으로 커널 모드로 전환

시스템 콜이란 커널 영역의 기능을 사용자 모드에서 사용 가능하게 도와주는 기능을 말한다. 즉, 프로세스가 하드웨어에 직접 접근해서 필요한 기능을 사용할 수 있게 해준다.

## System call을 사용하는 이유?
특권 명령(Privileged Instruction)으로 분류하여 막아 놓은 명령을 사용하기 위해서 시스템 콜을 사용한다.

### 특권 명령(Protected Instruction)
프로세스의 실행, 종료나 I/O 작업 등의 사용자가 함부로 사용하면 문제가 될 만한 명령들
- 악의적으로 시스템 콜을 사용하는 경우나 초보 사용자가 하드웨어 명령어를 잘 몰라서 아무렇게 함수를 호출했을 경우에 시스템 전체를 망가뜨릴 수도 있기 때문에 특권 명령이 생기게 되었다.
- 커널 모드에서만 사용이 가능하다.
- 이와 같은 기능을 사용하기 위해서 유저 모드에서 커널 모드로 트랩(trap)하는 시스템 콜(System call)을 사용한다.
 
### Trap이란? (Synchronous)
- Trap은 Interrupt의 한 종류로서 명령의 수행 결과로 발생한다(동기적). 주로 System Call을 호출할 때나 Segmentation fault(할당되지 않은 메모리 참조)로 인해 발생한다. Trap이 발생하면 Trap Table로 이동하여 해당하는 명령을 수행한다.

## System call 유형
프로그래밍 언어에서 지원하지 않고 운영체제를 통해 사용해야하는 기능의 종류
- 프로세스 제어
    - exec() : 다른 프로그램의 실행
    - fork() : 새 프로세스의 생성
    - wait() : 자식 프로세스가 끝날 때 까지 대기
- 파일 조작
    - open(), read(), write()
- 장치 관리
    - 장치의 부착, 분리 등
- 정보 유지
    - 시간, 날짜의 설정 등
- 통신
    - 공유 메모리에서 다른 프로세스 소유 메모리 접근 시